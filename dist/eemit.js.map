{"version":3,"sources":["../src/eemit.js"],"names":[],"mappings":";;;;;;;;;;;;kBASe,kBAAU;AACvB,MAAI,cAAJ,CADuB;AAEvB,MAAI,iBAAJ,CAFuB;;AAIvB,MAAM,WAAW,SAAX,QAAW;WAAS,UAAU,OAAO,KAAP,CAAV;GAAT,CAJM;AAKvB,MAAM,aAAa,SAAb,UAAa;WAAS,OAAO,KAAP,KAAiB,UAAjB;GAAT,CALI;;AAOvB,MAAI,WAAW,MAAX,CAAJ,EAAwB;QAIhB;;;AAIJ,eAJI,KAIJ,GAAqB;;;8BAJjB,OAIiB;;0CAAN;;SAAM;;oGAJjB,wDAKO,QADU;;AAEnB,cAAK,YAAL,GAAoB,EAApB,CAFmB;;OAArB;;aAJI;MAAc,QAJE;;AActB,YAAQ,MAAM,SAAN,CAdc;AAetB,eAAW,KAAX,CAfsB;GAAxB,MAgBO,IAAI,SAAS,MAAT,KAAoB,OAAO,MAAP,KAAkB,WAAlB,EAA+B;AAC5D,YAAQ,UAAU,EAAV,CADoD;AAE5D,UAAM,YAAN,GAAqB,EAArB,CAF4D;AAG5D,eAAW,KAAX,CAH4D;GAAvD,MAIA;AACL,UAAM,IAAI,SAAJ,CAAc,sDAAd,CAAN,CADK;GAJA;;AAeP,QAAM,EAAN,GAAW,SAAS,EAAT,CAAY,IAAZ,EAAkB,QAAlB,EAA4B;AACrC,QAAI,CAAC,QAAD,IAAa,CAAC,WAAW,QAAX,CAAD,EAAuB;AACtC,YAAM,IAAI,SAAJ,CAAc,6BAAd,CAAN,CADsC;KAAxC;;AAIA,SAAK,YAAL,CAAkB,IAAlB,IAA0B,KAAK,YAAL,CAAkB,IAAlB,KAA2B,EAA3B,CALW;AAMrC,SAAK,YAAL,CAAkB,IAAlB,EAAwB,IAAxB,CAA6B,QAA7B,EANqC;;AAQrC,WAAO,IAAP,CARqC;GAA5B,CAtCY;;AAyDvB,QAAM,GAAN,GAAY,SAAS,GAAT,CAAa,IAAb,EAAmB,QAAnB,EAA6B;AACvC,QAAI,QAAJ,EAAc;AACZ,UAAI,CAAC,WAAW,QAAX,CAAD,EAAuB;AACzB,cAAM,IAAI,SAAJ,CAAc,6BAAd,CAAN,CADyB;OAA3B;AAGA,WAAK,YAAL,CAAkB,IAAlB,EAAwB,MAAxB,CAA+B,KAAK,YAAL,CAAkB,IAAlB,EAAwB,OAAxB,CAAgC,QAAhC,CAA/B,EAA0E,CAA1E,EAJY;KAAd,MAKO;AACL,aAAO,KAAK,YAAL,CAAkB,IAAlB,CAAP,CADK;KALP;;AASA,WAAO,IAAP,CAVuC;GAA7B,CAzDW;;AA6EvB,QAAM,IAAN,GAAa,SAAS,IAAT,CAAc,IAAd,EAAoB,QAApB,EAA8B;AACzC,aAAS,UAAT,GAAsB,IAAtB,CADyC;AAEzC,SAAK,EAAL,CAAQ,IAAR,EAAc,QAAd,EAFyC;;AAIzC,WAAO,IAAP,CAJyC;GAA9B,CA7EU;;AA2FvB,QAAM,OAAN,GAAgB,SAAS,OAAT,CAAiB,IAAjB,EAAgC;;;uCAAN;;KAAM;;AAC9C,QAAM,SAAS,IAAC,CAAK,YAAL,CAAkB,IAAlB,KAA2B,KAAK,YAAL,CAAkB,IAAlB,EAAwB,KAAxB,EAA3B,IAA+D,EAAhE,CAD+B;;AAG9C,WAAO,OAAP,CAAe,oBAAY;AAEzB,UAAI,SAAS,UAAT,EAAqB;AACvB,eAAK,GAAL,CAAS,IAAT,EAAe,QAAf,EADuB;OAAzB;;AAIA,eAAS,KAAT,SAAqB,IAArB,EANyB;KAAZ,CAAf,CAH8C;;AAY9C,WAAO,IAAP,CAZ8C;GAAhC,CA3FO;;AA0GvB,SAAO,QAAP,CA1GuB;CAAV","file":"eemit.js","sourcesContent":["/**\n * Eemit Event Emitter\n *\n * @module Eemit\n * @param {object|function} target Target to decorate with event\n *   emitting capabilities. Can be a simple object, an instantiated class or a\n *   constructor function. Optional.\n * @returns {function}\n */\nexport default target => {\n  let eemit;\n  let compound;\n\n  const isObject = value => value === Object(value);\n  const isFunction = value => typeof value === 'function';\n\n  if (isFunction(target)) {\n    /**\n     * Class representing an event emitter.\n     */\n    class Eemit extends target {\n      /**\n       * Create an event emitter.\n       */\n      constructor(...args) {\n        super(...args);\n        this._eemitEvents = {};\n      }\n    }\n\n    eemit = Eemit.prototype;\n    compound = Eemit;\n  } else if (isObject(target) || typeof target === 'undefined') {\n    eemit = target || {};\n    eemit._eemitEvents = {};\n    compound = eemit;\n  } else {\n    throw new TypeError('Eemit can only be composed with objects or functions');\n  }\n\n  /**\n   * Attach event handler\n   *\n   * @param {string} name Name of event\n   * @param {function} callback Event handler to attach\n   * @returns {object|function} Returns itself\n   */\n  eemit.on = function on(name, callback) {\n    if (!callback || !isFunction(callback)) {\n      throw new TypeError('Callback must be a function');\n    }\n\n    this._eemitEvents[name] = this._eemitEvents[name] || [];\n    this._eemitEvents[name].push(callback);\n\n    return this;\n  };\n\n  /**\n   * Detach event handler\n   *\n   * @param {string} name Name of event\n   * @param {function} callback Event handler to remove. When omitted, removed\n   *   all eemit handlers\n   * @returns {object|function} Returns itself\n   */\n  eemit.off = function off(name, callback) {\n    if (callback) {\n      if (!isFunction(callback)) {\n        throw new TypeError('Callback must be a function');\n      }\n      this._eemitEvents[name].splice(this._eemitEvents[name].indexOf(callback), 1);\n    } else {\n      delete this._eemitEvents[name];\n    }\n\n    return this;\n  };\n\n  /**\n   * Attach handler to be fired only once\n   *\n   * @param {string} name Name of event\n   * @param {function} callback\n   * @returns {object|function} Returns itself\n   */\n  eemit.once = function once(name, callback) {\n    callback._eemitOnce = true;\n    this.on(name, callback);\n\n    return this;\n  };\n\n  /**\n   * Trigger events\n   *\n   * @param {string} name Name of event\n   * @param {arguments} args The remainder of arguments\n   * @returns {object|function} Returns itself\n   */\n  eemit.trigger = function trigger(name, ...args) {\n    const cached = (this._eemitEvents[name] && this._eemitEvents[name].slice()) || [];\n\n    cached.forEach(callback => {\n      // Detach handlers marked to run only once.\n      if (callback._eemitOnce) {\n        this.off(name, callback);\n      }\n\n      callback.apply(this, args);\n    });\n\n    return this;\n  };\n\n  return compound;\n};\n"]}